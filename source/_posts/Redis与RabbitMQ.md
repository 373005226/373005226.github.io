---
title: Redis和RabbitMQ作为消息队列的对比
author: LY
date: 2019-10-15
summary: Redis和RabbitMQ都是作为消息中间件的不错的选择，这里介绍这两种方法的区别
categories:
    - 日常总结
tags:
    - Redis
---

>   这篇博客是属于一个总结，我在天天生鲜这个项目用到了消息中间件，所以就查阅了这方面的知识，对网上大部分的博客做一个总结
>
> 参考文章：
>
> https://blog.csdn.net/fengxiaolu311/article/details/82904217
>
> https://blog.csdn.net/qq_42253147/article/details/93327939
>
> https://blog.csdn.net/dd18709200301/article/details/79077839

## RabbitMQ

RabbitMQ是一个专门的AMQP协议队列，用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不俗，他的优势就在于提供可靠的队列服务，使得不同的应用可以通过同一个协议去共享数据，并且可做到异步。

## Redis

Redis众所周知是一个内存级别的数据库，通过键值对的方式才存储数据，但虽然Redis本身是一个数据库，但是Redis本身是支持MQ（Message Queue，即消息队列）的，而且MQ的一些常用功能使用Redis也能实现，如果要求没那么高的话使用Redis作为中间件是一个不错的选择，完全可以当做一个轻量级的队列服务来使用。

## 两者间具体的对比

### 可靠性

Redis：

1. 没有相应的机制保证消息的可靠消费，如果发布者发布一条消息，而没有对应的订阅者的话，这条消息将丢失，不会存在内存中；
2. 如果订阅者消费失败，消息丢失，这个时候就需要开发者手动处理；

RabbitMQ：

1. 具有消息消费确认机制，如果发布一条消息，还没有消费者消费该队列，那么这条消息将一直存放在队列中，直到有消费者消费了该条消息，以此可以保证消息的可靠消费；
2. 即使消费者消费失败，也会自动使消息体返回原队列，同时可全程持久化，保证消息体被正确消费；



&emsp;

### 可靠发布

Redis：Redis是不提供这方面的服务的，需要开发者自行实现；

RabbitMQ：具有发布确认功能，保证消息被发布到服务器；

&emsp;

### 持久性

Redis：Redis的持久化是针对于整个redis缓存的内容，它有RDB和AOF两种持久化方式，可以将整个redis实例持久化到磁盘，以此来做数据备份，防止异常情况下导致数据丢失；

RabbitMQ：队列，每一条消息，都可以选择是否持久化；

&emsp;

### 队列监控

Redis：不提供，需自行实现；

RabbitMQ：后台可以监控所有创建的队列的所有信息（内存，磁盘，消费者，生产者，速率等），良好的后台管理平台可以方面我们更好的使用；

&emsp;

### 负载均衡

RabbitMQ：RabbitMQ队列可以被多个消费者同时监控消费，但是每一条消息只能被消费一次，由于RabbitMQ的消费确认机制，因此它能够根据消费者的消费能力而调整它的负载；

Redis：Redis发布订阅模式，一个队列可以被多个消费者同时订阅，当有消息到达时，会将该消息依次发送给每个订阅者，她是一种消息的广播形式，redis本身不做消费者的负载均衡，因此消费效率存在瓶颈；

&emsp;

### 高可用性

Redis：采用主从模式，读写分离，但是故障转移还没有非常完善的官方解决方案；

RabbitMQ：集群采用磁盘、内存节点，任意单点故障都不会影响整个队列的操作；

&emsp;

### 流量控制

Redis：不提供，需自行实现；

RabbitMQ：服务器过载的情况，对生产者速率会进行限制，保证服务可靠性；

&emsp;

### 实时性

Redis：Redis是一个高效的缓存服务器，所有数据都保存在内存当中，所以它具备更高的实时性；

&emsp;

### 出入队性能

对于RabbitMQ和Redis的入队和出队操作，各执行100万次，每10万次记录一次执行时间。测试数据分为128Bytes、512Bytes、1K和10K四个不同大小的数据。

![](https://imgconvert.csdnimg.cn/aHR0cDovL2ltYWdlcy5jbml0YmxvZy5jb20vaS80NTI2NzEvMjAxNDA3LzAyMTQ0ODM5MzI0ODU3OC5wbmc)

实验表明：入队时，当数据比较小时Redis的性能要高于RabbitMQ，而如果数据大小超过了10K，Redis则慢的无法忍受；出队时，无论数据大小，Redis都表现出非常好的性能，而RabbitMQ的出队性能则远低于Redis。

&emsp;

## 两者的应用场景

Redis：轻量级，高并发，延迟敏感，即时数据分析、秒杀计数器、缓存等

RabbitMQ：重量级，高并发，异步批量数据异步处理、并行任务串行化，高负载任务的负载均衡等



> 这篇博客的内容待继续完善，现在这里主要是总结了网上的经验，等我完全熟悉这两个数据库的时候我会拿案例来说明