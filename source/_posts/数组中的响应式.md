---
title: Vue数组中的响应式
date: 2019-12-19
summary: Vue中并不是所有修改虚拟DOM方法都是响应式的，这里来解释一下
author: LY
categories:
    - 前端
tags:
    - Vue
---

> 以下皆是由https://www.bilibili.com/video/av59594689?from=search&seid=2169751232721048853
>
> 视频中的老师操作代码和讲义总结而成

## 有响应式的方法

Vue里面并不是所有修改值都有一个响应式

这里先介绍有响应式的方法：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<ul>
				<li v-for="(item,index) in movie" >
					{{item}}
				</li>
			</ul>
			<button @click="btnclick">
				按钮
			</button>
		</div>
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
					cindex: 0
				},
				methods:{
					btnclick(){
						
					}
				}
			})
		</script>
	</body>
</html>

```

### push方法

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<ul>
				<li v-for="(item,index) in movie" >
					{{item}}
				</li>
			</ul>
			<button @click="btnclick">
				按钮
			</button>
		</div>
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
					cindex: 0
				},
				methods:{
					btnclick(){
						// 1.push方法:是有响应式的
						this.movie.push('异度空间')
					}
				}
			})
		</script>
	</body>
</html>

```



### pop方法(删除数组中的最后一个元素)

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
<div id='app'>
    <ul>
        <li v-for="(item,index) in movie" >
            {{item}}
        </li>
    </ul>
    <button @click="btnclick">
        按钮
    </button>
</div>
<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el: '#app',
    data: {
      movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
    },
    methods:{
      btnclick(){
        // 1.push方法:是有响应式的
        // this.movie.push('异度空间')

        // 2.通过索引修改数组的元素
        // 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
        // this.movie[0]='英雄本色';

        //pop有响应式
        this.movie.pop()
      }
    }
  })
</script>
</body>
</html>
```

pop方法也是有响应式的



### shift方法(删除数组中的第一个元素)

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
<div id='app'>
    <ul>
        <li v-for="(item,index) in movie" >
            {{item}}
        </li>
    </ul>
    <button @click="btnclick">
        按钮
    </button>
</div>
<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el: '#app',
    data: {
      movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
    },
    methods:{
      btnclick(){
        // 1.push方法:是有响应式的
        // this.movie.push('异度空间')

        // 2.通过索引修改数组的元素
        // 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
        // this.movie[0]='英雄本色';

        //pop有响应式
        // this.movie.pop()

        //shift有响应式
        this.movie.shift()
      }
    }
  })
</script>
</body>
</html>

```



### unshift方法(在数组第一个元素添加数据)

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
<div id='app'>
    <ul>
        <li v-for="(item,index) in movie" >
            {{item}}
        </li>
    </ul>
    <button @click="btnclick">
        按钮
    </button>
</div>
<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el: '#app',
    data: {
      movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
    },
    methods:{
      btnclick(){
        // 1.push方法:是有响应式的
        // this.movie.push('异度空间')

        // 2.通过索引修改数组的元素
        // 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
        // this.movie[0]='英雄本色';

        //pop有响应式
        // this.movie.pop()

        //shift有响应式
        // this.movie.shift()

        //unshift有响应式
        this.movie.unshift('枪王')
      
      }
    }
  })
</script>
</body>
</html>

```



### spilt方法

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
<div id='app'>
    <ul>
        <li v-for="(item,index) in movie" >
            {{item}}
        </li>
    </ul>
    <button @click="btnclick">
        按钮
    </button>
</div>
<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el: '#app',
    data: {
      movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
    },
    methods:{
      btnclick(){
        // 1.push方法:是有响应式的
        // this.movie.push('异度空间')

        // 2.通过索引修改数组的元素
        // 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
        // this.movie[0]='英雄本色';

        //pop有响应式
        // this.movie.pop()

        //shift有响应式
        // this.movie.shift()

        //unshift有响应式
        // this.movie.unshift('枪王')

        //spilt有响应式
        this.movie.splice(1,0,'家有喜事')
      }
    }
  })
</script>
</body>
</html>

```



spilt方法也肯定是有响应式的，具体方法可以看源码

![](https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191219234049.png)

...items就是可以接受多个参数的意思，类似于python中的不定长参数

### sort和reverse方法都是响应式的

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
<div id='app'>
    <ul>
        <li v-for="(item,index) in movie" >
            {{item}}
        </li>
    </ul>
    <button @click="btnclick">
        按钮
    </button>
</div>
<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el: '#app',
    data: {
      movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
    },
    methods:{
      btnclick(){
        // 1.push方法:是有响应式的
        // this.movie.push('异度空间')

        // 2.通过索引修改数组的元素
        // 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
        // this.movie[0]='英雄本色';

        //pop有响应式
        // this.movie.pop()

        //shift有响应式
        // this.movie.shift()

        //unshift有响应式
        // this.movie.unshift('枪王')

        //spilt有响应式
        // this.movie.splice(1,0,'家有喜事')

        //sort和reverse方法
        // this.movie.sort()

        this.movie.reverse()
      }
    }
  })
</script>
</body>
</html>

```

### 如果要用到修改索引的方式去修改值，只能使用spilt或者是Vue的方法来改变

### Vue的方式

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<ul>
				<li v-for="(item,index) in movie" >
					{{item}}
				</li>
			</ul>
			<button @click="btnclick">
				按钮
			</button>
		</div>
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
					cindex: 0
				},
				methods:{
					btnclick(){
						// 1.push方法:是有响应式的
						// this.movie.push('异度空间')
						
						// 2.通过索引修改数组的元素
						// 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
						// this.movie[0]='英雄本色'
						
						//pop有响应式
						// this.movie.pop()
						
						//shift有响应式
						// this.movie.shift()
						
						//unshift有响应式
						// this.movie.unshift('枪王')
						
						//sort和reverse都是响应式的
						
						// Vue的方式改变
						Vue.set(this.movie,0,'英雄本色')
					}
				}
			})
		</script>
	</body>
</html>

```

### spilt的方式

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<ul>
				<li v-for="(item,index) in movie" >
					{{item}}
				</li>
			</ul>
			<button @click="btnclick">
				按钮
			</button>
		</div>
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
					cindex: 0
				},
				methods:{
					btnclick(){
						// 1.push方法:是有响应式的
						// this.movie.push('异度空间')
						
						// 2.通过索引修改数组的元素
						// 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
						// this.movie[0]='英雄本色'
						
						//pop有响应式
						// this.movie.pop()
						
						//shift有响应式
						// this.movie.shift()
						
						//unshift有响应式
						// this.movie.unshift('枪王')
						
						//sort和reverse都是响应式的
						
						// Vue的方式改变
						// Vue.set(this.movie,0,'英雄本色')
                        
                        this.movile.spilt(0,1,'枪王')
					}
				}
			})
		</script>
	</body>
</html>

```



## 没有响应式的方法

### 通过索引修改数组元素

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<ul>
				<li v-for="(item,index) in movie" >
					{{item}}
				</li>
			</ul>
			<button @click="btnclick">
				按钮
			</button>
		</div>
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					movie: ['霸王别姬', '阿飞正传', '胭脂扣', '英雄本色', '新上海滩', '东邪西毒', '倩女幽魂'],
					cindex: 0
				},
				methods:{
					btnclick(){
						// 1.push方法:是有响应式的
						// this.movie.push('异度空间')
						
						// 2.通过索引修改数组的元素
						// 使用app.movie查看发现没有响应,所以直接修改索引是没有发生响应的
						this.movie[0]='英雄本色'
					}
				}
			})
		</script>
	</body>
</html>

```

这个方法修改的话是没有响应式的,因为Vue的内部没有这个方法

