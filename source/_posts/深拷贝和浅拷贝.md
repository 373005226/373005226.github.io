---
title: 深拷贝和浅拷贝
date: 2019-10-18
summary: 详细介绍python常考点：深拷贝和浅拷贝的区别
author: LY
categories:
    - 后端
tags:
    - python面试题
    - python语法
---

## 浅拷贝

- 浅拷贝是对于一个对象的顶层拷贝

通俗的理解是：拷贝了引用，并没有拷贝内容

```python
a=[11,22,33]
b=a
print(id(a))
print(id(b))
#92188584
#92188584
```

这里就是b只拷贝了a的引用，而不是直接拷贝那个值

## 深拷贝

```python
import copy
a=[11,22,33]
c=copy.deepcopy(a)
print(a)	#[11,22,33]
print(c)	#[11,22,33]
print(id(a))#87652792
print(id(c))#87206488
```

两者只是拷贝了值，而不是拷贝引用，c开辟了自己的一个内存空间，但是值和a一样

## copy.copy

**copy.copy在面对可变类型和不可变类型是不同的**

### copy.copy面对不可变类型

```python
import copy
a=[11,22,33]
b=[44,55,66]
c=(a,b)
print('c1为',c)
e=copy.copy(c)
print('e1为',e)
a.append(77)
print('c2为',c)
print('e2为',e)
```

```
c1为 [[11, 22, 33], [44, 55, 66]]
e1为 [[11, 22, 33], [44, 55, 66]]
c2为 [[11, 22, 33, 77], [44, 55, 66]]
e2为 [[11, 22, 33, 77], [44, 55, 66]]
93185248
93185248
```

copy.copy面对一个不可变类型，直接就是一个浅拷贝

### copy.copy面对可变类型

```python
import copy
a=[11,22,33]
b=[44,55,66]
c=[a,b]
print('c1为',c)
e=copy.copy(c)
print('e1为',e)
a.append(77)
print('c2为',c)
print('e2为',e)
print(id(c))
print(id(e))
```

```
c1为 [[11, 22, 33], [44, 55, 66]]
e1为 [[11, 22, 33], [44, 55, 66]]
c2为 [[11, 22, 33, 77], [44, 55, 66]]
e2为 [[11, 22, 33, 77], [44, 55, 66]]
83590840
83590880
```

**虽然值是相同的，但是c和e两个内存是不同的。c是把a和b引用组合成一个元组，而e copy了c的引用，就像一个递归一样，e copy了c，c引用了a和b，所以最后也是同样的引用了a和b，所以a和b变化的时候e同样也会变化**

