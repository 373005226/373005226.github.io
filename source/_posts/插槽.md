---
title: 插槽slot
summary: 详解插槽的使用以及作用域
date: 2019-12-21
author: LY
categories:
    - 前端
tags:
    - Vue
---

> 以下皆是由https://www.bilibili.com/video/av59594689?from=search&seid=2169751232721048853
>
> 视频中的老师操作代码和讲义总结而成

## 插槽的使用

插槽就像我们日常生活中的U盘什么的接口，可以使用来个性化定制。拿京东的导航栏为例：

![](https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221153120.png)

![](https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221153148.png)

类似这类网站，遇到这种大面积重复的部分肯定不是每个页面都是重写的，肯定是有复用的形式。

拿下面的代码来说：

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>

<div id='app'>
    <cpn></cpn>
    <cpn></cpn>
    <cpn></cpn>
    <cpn></cpn>
    <cpn></cpn>
</div>

<template id="cpn">
    <div>
        我是子组件
    </div>
</template>

<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el:'#app',
    data:{
      message:'hello'
    },
    components:{
      cpn:{
        template:'#cpn',
      }
    }
  })
</script>
</body>
</html>

```

如果我要在第一个`cpn`里面添加一个`button`，第二个`cpn`里面添加一个`span`，那么如果在子组件`template`里面添加的话就会导致每个`cpn`都添加了，所以这个时候就要用到插槽。

插槽可以帮助个性化定制，其使用方式如下：

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>

<div id='app'>
    <cpn><button>按钮</button></cpn>
    <cpn><span>span</span></cpn>
    <cpn><h1>h1</h1></cpn>
    <cpn><h2>h2</h2></cpn>
    <cpn><h3>h3</h3></cpn>
</div>

<template id="cpn">
    <div>
        我是子组件
        <slot></slot>
    </div>
</template>

<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el:'#app',
    data:{
      message:'hello'
    },
    components:{
      cpn:{
        template:'#cpn',
      }
    }
  })
</script>
</body>
</html>
```

运行效果如图：

<img src="https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221153650.png" style="zoom:50%;" />

每个子组件都可以自定义要的组件





## 插槽的默认值

此外插槽还可以添加默认值

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>

<div id='app'>
    <cpn></cpn>
</div>

<template id="cpn">
    <div>
        我是子组件
        <slot><h2>默认slot插槽组件</h2></slot>
    </div>
</template>

<script src="../js/vue.js"></script>
<script>
  const app = new Vue({
    el:'#app',
    data:{
      message:'hello'
    },
    components:{
      cpn:{
        template:'#cpn',
      }
    }
  })
</script>
</body>
</html>

```



<img src="https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221154051.png" style="zoom:67%;" />

## 具名插槽

这个还是拿京东的导航条来说明

![](https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221153120.png)

![](https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221153148.png)

这个导航条三个部分就有三个插槽，也就是上面的方法不适用的，要确定每个插槽要添加什么内容，所以就有具名插槽

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<cpn><span slot="center">标题</span></cpn>
		</div>
		
		<template id='cpn'>
			<div>
				<slot name='left'><span>左边</span></slot>
				<slot name='center'><span>中间</span></slot>
				<slot name='right'><span>右边</span></slot>
			</div>
>
				123
			</div>
		</template>
		
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el:'#app',
				data:{
					message:'hello',
					isShow:true
				},
				components:{
					cpn:{
						template:'#cpn',
						data(){
							return{
								isShow:false
							}
						}
					}
				}
			})
		</script>
	</body>
</html>

```

设置了一个`isShow`属性来判断组件的作用域，结果如图：

<img src="https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221155437.png" style="zoom: 50%;" />

也就是说是可以显示的，这个的插槽的作用域是当前模板里面的，如上代码的组件是在app模板里面的，所以使用的是父组件的属性，也就是`isShow=true`

如果是子组件template里面编写的作用域的话，如下代码所示：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<cpn v-show='isShow'></cpn>
		</div>
		
		<template id='cpn'>
			<div>
				123
				<button v-show="isShow">button</button>
			</div>
		</template>
		
		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el:'#app',
				data:{
					message:'hello',
					isShow:true
				},
				components:{
					cpn:{
						template:'#cpn',
						data(){
							return{
								isShow:false
							}
						}
					}
				}
			})
		</script>
	</body>
</html>

```



在子组件`template`里面编写一个`button`，这个`button`引用的就是它当前作用域的值，也就是`isShow='false'`

用官方文档的话说就是：**父模板的组件都会在父级作用域内编译，子组件模板的所有东西都会在子集作用域内编译**

## 作用域插槽

作用域插槽这个官方文档说的也不是特别清楚，实际上的作用如下：

在子组件定义了一堆数据，然后在父组件显示：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<cpn></cpn>
			<cpn></cpn>
			<cpn></cpn>
		</div>

		<template id='cpn'>
			<div>
				<slot>
					<ul>
						<li v-for="item in planguage">
							{{item}}
						</li>
					</ul>
				</slot>
			</div>
		</template>

		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					message: 'hello'
				},
				components: {
					cpn: {
						template: '#cpn',
						data() {
							return {
								planguage: ['JavaScript', 'java', 'php', 'c#', 'c++', 'Python']
							}
						}
					}
				}
			})
		</script>
	</body>
</html>

```

<img src="https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221160736.png" style="zoom:50%;" />

假如此时有一个需求，要求数据是子组件的，但是排布的样式由父组件决定。

也就是父组件要获取子组件的属性，然后父组件再用自己的方式打印出来。

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id='app'>
			<cpn></cpn>

			<cpn>
<!--				2.把子组件的属性打印出来-->
<!--				这个是V2.5.*的版本中，必须要用template包裹起来，往后的版本是没有的，为了兼容要使用template版本-->
				<template slot-scope="slot">
<!--				3..把要遍历的属性打印出来-->
					<span v-for="item in slot.abc">{{item}}-</span>
				</template>
			</cpn>
		</div>

		<template id='cpn'>
			<div>
<!--				1. 这里获取子组件的属性-->
<!--				这个：abc名字是随便取的，如果要自定义名字的话后面也修改名字就好了-->
				<slot :abc="planguage">
					<ul>
						<li v-for="item in planguage">
							{{item}}
						</li>
					</ul>
				</slot>
			</div>
		</template>

		<script src="../js/vue.js"></script>
		<script>
			const app = new Vue({
				el: '#app',
				data: {
					message: 'hello'
				},
				components: {
					cpn: {
						template: '#cpn',
						data() {
							return {
								planguage: ['JavaScript', 'java', 'php', 'c#', 'c++', 'Python']
							}
						}
					}
				}
			})
		</script>
	</body>
</html>

```

运行结果如图：

![](https://txy-tc-ly-1256104767.cos.ap-guangzhou.myqcloud.com/20191221161423.png)

就可以使用自己的方式去排布了

子组件的slot的值是可以自定定义的，改成什么后面也就引用什么，template里面的`slot-scope="slot"`这个是固定的，一定要这样写，`template`是`vue`的2.5.*版本中一定要使用template包裹起来，不然会报错，这个是为了兼容才这样写

整体而言的流程如下：

1. 子组件的slot引用子组件的属性
2. 父组件使用<template slot-scope="slot"></template>去调用，注意这个的`slot-scope="slot"`是固定格式
3. 在<template slot-scope="slot"></template>里面`v-for`调用要遍历的属性

